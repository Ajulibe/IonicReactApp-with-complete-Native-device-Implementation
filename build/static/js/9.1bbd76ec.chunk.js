(this["webpackJsonpionic-react"]=this["webpackJsonpionic-react"]||[]).push([[9],{154:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),l=a(18),c=a(36),o=a(0),i=a.n(o),s=a(2),u=a(12),m=a(35),p=a(6),g=a(8),b=a(9),d=a(55),f=(Error,{web:!0,ios:!0,android:!0,electron:!0}),v={Accessibility:{isScreenReaderAvailable:Object.assign(Object.assign({},f),{web:!1}),speak:{web:"speechSynthesis"in window,ios:!0,android:!0,electron:!0}},App:{state:f,getLaunchUrl:Object.assign(Object.assign({},f),{web:!1}),appUrlOpen:Object.assign(Object.assign({},f),{web:!1})},Browser:{open:f,prefetch:Object.assign(Object.assign({},f),{web:!1}),close:Object.assign(Object.assign({},f),{web:!1})},Camera:{getPhoto:f},Clipboard:{useClipboard:Object.assign(Object.assign({},f),{web:"clipboard"in navigator})},Device:{getInfo:f,getLanguageCode:f},FileSystem:{useFileSystem:f},Geolocation:{getCurrentPosition:Object.assign(Object.assign({},f),{web:"geolocation"in navigator}),watchPosition:Object.assign(Object.assign({},f),{web:"geolocation"in navigator})},Network:{getStatus:f},Platform:{getPlatform:f},Storage:{useStorage:f}};var h,w;h="FileSystem",w="useFileSystem",!m.c.isPluginAvailable(h)||v[h][w][m.c.platform];function E(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.blob();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var a=new FileReader;a.onerror=t,a.onload=function(){"string"===typeof a.result?e(a.result):t("method did not return a string")},a.readAsDataURL(n)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=a(15),y=a(25),x=(a(154),m.e.Camera),k=m.e.Filesystem;t.default=function(){var e=Object(o.useState)(),t=Object(c.a)(e,2),a=t[0],n=t[1],p=Object(o.useState)(),g=Object(c.a)(p,2),b=g[0],d=g[1],f=Object(o.useContext)(y.a),v=Object(O.e)(),h=Object(o.useRef)(null),w=Object(o.useRef)(null),j=function(){w.current.click()},C=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(m.c.isPluginAvailable("Camera")),m.c.isPluginAvailable("Camera")){e.next=4;break}return j(),e.abrupt("return");case 4:return e.prev=4,e.next=7,x.getPhoto({resultType:m.a.Uri,source:m.b.Camera,quality:90,width:500});case 7:if((t=e.sent)&&t.webPath){e.next=10;break}return e.abrupt("return");case 10:n({path:t.path?t.path:"path",preview:t.webPath}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),j();case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("started"),n=null===(t=h.current)||void 0===t?void 0:t.value,console.log(a),console.log(b),n&&0!==n.toString().trim().length&&a&&b){e.next=7;break}return alert("Select all options"),e.abrupt("return");case 7:return l=(new Date).getTime()+".jpeg",console.log(l),e.next=11,E(a.preview);case 11:c=e.sent,k.writeFile({path:l,data:c,directory:m.d.Data}),console.log(f.addMemory),f.addMemory(l,c,n.toString(),b),v.length>0?v.goBack():v.replace("/good-memories");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(s.s,null,i.a.createElement(s.n,null,i.a.createElement(s.D,null,i.a.createElement(s.d,{slot:"start"},i.a.createElement(s.b,{defaultHref:"/good-memories"})),i.a.createElement(s.C,null,"Add New Memory"))),i.a.createElement(s.j,null,i.a.createElement("h2",null,"New Memory"),i.a.createElement(s.m,null,i.a.createElement(s.v,null,i.a.createElement(s.i,null,i.a.createElement(s.q,null,i.a.createElement(s.r,{position:"floating"},"Memory Title"),i.a.createElement(s.p,{type:"text",ref:h})))),i.a.createElement(s.v,null,i.a.createElement(s.i,null,i.a.createElement(s.w,{onIonChange:function(e){var t=e.detail.value;d(t)},value:b,placeholder:"Select One"},i.a.createElement(s.x,{value:"good"},"Good Memory"),i.a.createElement(s.x,{value:"bad"},"Bad Memory")))),i.a.createElement(s.v,{className:"ion-text-center"},i.a.createElement(s.i,null,i.a.createElement("div",{className:"image-preview"},!a&&i.a.createElement("h3",null,"No Photo Chosen"),a&&i.a.createElement("img",{src:a.preview,alt:"Preview"})),i.a.createElement(s.c,{fill:"clear",onClick:C},i.a.createElement(s.o,{icon:u.c,slot:"start"}),i.a.createElement(s.r,null,"Take Photo")),i.a.createElement("input",{type:"file",hidden:!0,ref:w,onChange:function(e){var t=e.target.files[0];console.log(t);var a=new FileReader;a.onload=function(){n({path:void 0,preview:a.result.toString()})},a.readAsDataURL(t)}}))),i.a.createElement(s.v,{className:"ion-margin-top"},i.a.createElement(s.i,{className:"ion-text-center"},i.a.createElement(s.c,{onClick:S},"Add Memory"))))))}}}]);
//# sourceMappingURL=9.1bbd76ec.chunk.js.map